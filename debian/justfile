# Show available recipes
default:
    @just --list

# Build Debian package using standard Debian tools
build:
    #!/usr/bin/env bash
    set -e
    cd "{{justfile_directory()}}/.."
    dpkg-buildpackage -us -uc -b -d

# Remove built Debian packages and build artifacts
clean:
    #!/usr/bin/env bash
    set -e
    PROJECT_ROOT="{{justfile_directory()}}/.."

    # Remove Debian build artifacts in parent directory of project root
    rm -f "${PROJECT_ROOT}"/../play-launch_*.deb "${PROJECT_ROOT}"/../play-launch-dbgsym_*.ddeb
    rm -f "${PROJECT_ROOT}"/../play-launch_*.buildinfo "${PROJECT_ROOT}"/../play-launch_*.changes

    # Remove build artifacts in debian/ (staging uses package name with hyphen)
    rm -rf "${PROJECT_ROOT}"/debian/.debhelper "${PROJECT_ROOT}"/debian/debhelper-build-stamp
    rm -f "${PROJECT_ROOT}"/debian/files "${PROJECT_ROOT}"/debian/*.substvars
    rm -rf "${PROJECT_ROOT}"/debian/play-launch "${PROJECT_ROOT}"/debian/play-launch-dbgsym
    rm -rf "${PROJECT_ROOT}"/debian/home
